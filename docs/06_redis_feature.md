# การใช้งาน Redis Caching ในระบบ Backend

ระบบ backend ได้รับการปรับปรุงด้วยการเพิ่ม Redis caching ในส่วนต่างๆ เพื่อเพิ่มประสิทธิภาพและความสามารถในการรองรับการใช้งาน

## รายละเอียดการ Cache ในแต่ละ Repository

### User Repository
การกำหนด cache key และ TTL สำหรับข้อมูลผู้ใช้:
- `user:id:{id}`
- `user:username:{username}`
- `user:email:{email}`
- `user:firebase:{firebaseUID}`
- **TTL**: 24 ชั่วโมง

### Story Repository
การตั้งค่า cache สำหรับ Story:
- `story:{id}` (TTL: จนกว่า story จะหมดอายุ)
- `user_stories:{userID}` (TTL: 5 นาที)
- `active_stories` (TTL: 1 นาที)

### Notification Repository
การตั้งค่า cache สำหรับการแจ้งเตือน:
- `notification:{id}` (TTL: 30 นาที)
- `notifications:{recipientID}` (TTL: 5 นาที)

### SubPost Repository
การใช้งาน cache สำหรับ SubPost:
- `subpost:{id}` (TTL: 1 ชั่วโมง)
- `subposts:{parentID}` (TTL: 15 นาที)

## ประโยชน์ของการใช้ Redis Caching

การใช้งาน Redis caching มีข้อดีหลายประการ:

1. **การเรียกข้อมูลที่เร็วขึ้น**
   - เข้าถึงข้อมูลที่ใช้บ่อยได้เร็วขึ้น
   - ลดเวลาในการตอบสนองสำหรับการค้นหาข้อมูลทั่วไป

2. **ลดภาระของฐานข้อมูล**
   - ลดการทำงานของ MongoDB
   - ใช้ทรัพยากรระบบได้มีประสิทธิภาพมากขึ้น

3. **รองรับการขยายตัวของระบบ**
   - จัดการกับการเข้าถึงข้อมูลที่มีความถี่สูงได้ดีขึ้น
   - ระบบทำงานได้ดีขึ้นภายใต้โหลดที่สูง

4. **การจัดการ Cache อย่างชาญฉลาด**
   - มีกลไกการล้าง cache ที่เหมาะสม
   - อัพเดทข้อมูลอัตโนมัติเมื่อมีการเปลี่ยนแปลง

## การล้าง Cache (Cache Invalidation)

ระบบมีการจัดการกลไกการล้าง cache ที่เหมาะสมเพื่อรักษาความถูกต้องของข้อมูลเมื่อมีการอัพเดทในฐานข้อมูล

---

กลยุทธ์การใช้ cache นี้ช่วยเพิ่มประสิทธิภาพการทำงานของ backend พร้อมทั้งรักษาความถูกต้องและความน่าเชื่อถือของข้อมูล